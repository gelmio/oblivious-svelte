import{S as t,i as e,s as o,e as s,c as a,b as r,f as n,h as l,j as c,l as i,y as h,t as u,a as f,g as m,d as p,k as d,C as v,D as x,v as b,m as g,z as y,A as k,E as w,r as E,G as T,O as C,Q as A,n as I,I as j,q as L,R as $,K as B,T as D}from"./client.c0a201b3.js";import{g as P}from"./reader-hints.d2946797.js";function V(t,e,o,s,a=null){let r;const n=l=>{const c=l-r,i=c/s,h=[e[0]+(o[0]-e[0])*i,e[1]+(o[1]-e[1])*i];c<s?(t.scrollTo(h[0],h[1]),requestAnimationFrame(n)):(t.scrollTo(o[0],o[1]),a&&a())};requestAnimationFrame((t=>{r=t,n(t)}))}const{document:q,window:N}=A;function z(t){let e,o,i,v,x,b,g,y,k,w,E;return{c(){e=s("div"),o=s("p"),i=u("Congrats! You've made it to the end of Book 2!"),v=f(),x=s("p"),b=u("That's as far as things go for the moment, but Book 3 is on\n\t\t\t\t\tthe way out soon!"),g=f(),y=s("p"),k=u("While you wait, feel free to jump on the mailing list, or "),w=s("a"),E=u("flick me some money to keep the wheels rolling!"),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=r(e);o=a(s,"P",{});var l=r(o);i=m(l,"Congrats! You've made it to the end of Book 2!"),l.forEach(n),v=p(s),x=a(s,"P",{});var c=r(x);b=m(c,"That's as far as things go for the moment, but Book 3 is on\n\t\t\t\t\tthe way out soon!"),c.forEach(n),g=p(s),y=a(s,"P",{});var h=r(y);k=m(h,"While you wait, feel free to jump on the mailing list, or "),w=a(h,"A",{href:!0,rel:!0,class:!0});var u=r(w);E=m(u,"flick me some money to keep the wheels rolling!"),u.forEach(n),h.forEach(n),s.forEach(n),this.h()},h(){l(w,"href","https://transactions.sendowl.com/products/78458726/77A44CD1/add_to_cart"),l(w,"rel","nofollow"),l(w,"class","border-b border-oblivious-dark"),l(e,"class","text-center font-header mt-8")},m(t,s){c(t,e,s),d(e,o),d(o,i),d(e,v),d(e,x),d(x,b),d(e,g),d(e,y),d(y,k),d(y,w),d(w,E)},p:h,d(t){t&&n(e)}}}function G(t){let e,o,i,h,v,x,b=t[4]?"Chapter":"Book",y=t[10][1]>10&&!(t[10][1]%5)&&O();return{c(){e=s("div"),o=s("a"),i=u("Next "),h=u(b),x=f(),y&&y.c(),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=r(e);o=a(s,"A",{rel:!0,href:!0,class:!0});var l=r(o);i=m(l,"Next "),h=m(l,b),l.forEach(n),x=p(s),y&&y.l(s),s.forEach(n),this.h()},h(){l(o,"rel","prefetch"),l(o,"href",v="read/"+t[10][0]+"/"+t[10][1]),l(o,"class","inline-block text-lg p-2 rounded-lg no-underline bg-oblivious mr-4"),l(e,"class","flex flex-col md:flex-row justify-end items-end mt-8")},m(t,s){c(t,e,s),d(e,o),d(o,i),d(o,h),d(e,x),y&&y.m(e,null)},p(t,s){16&s&&b!==(b=t[4]?"Chapter":"Book")&&g(h,b),1024&s&&v!==(v="read/"+t[10][0]+"/"+t[10][1])&&l(o,"href",v),t[10][1]>10&&!(t[10][1]%5)?y||(y=O(),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(t){t&&n(e),y&&y.d()}}}function O(t){let e,o,i,h;return{c(){e=s("span"),o=u("... or "),i=s("a"),h=u("flick me some money!"),this.h()},l(t){e=a(t,"SPAN",{class:!0});var s=r(e);o=m(s,"... or "),i=a(s,"A",{href:!0,rel:!0,class:!0});var l=r(i);h=m(l,"flick me some money!"),l.forEach(n),s.forEach(n),this.h()},h(){l(i,"href","https://transactions.sendowl.com/products/78458726/77A44CD1/add_to_cart"),l(i,"rel","nofollow"),l(i,"class","border-b border-oblivious-dark"),l(e,"class","m-2")},m(t,s){c(t,e,s),d(e,o),d(e,i),d(i,h)},d(t){t&&n(e)}}}function H(t){let e,o,u,f;return{c(){e=s("div"),this.h()},l(t){e=a(t,"DIV",{class:!0}),r(e).forEach(n),this.h()},h(){l(e,"class","fixed inset-0 flex justify-center items-center cursor-zoom-out bg-oblivious-opaque")},m(o,s){c(o,e,s),t[17](e),u||(f=i(e,"click",t[18]),u=!0)},p:h,i(t){o||I((()=>{o=j(e,L,{}),o.start()}))},o:h,d(o){o&&n(e),t[17](null),u=!1,f()}}}function M(t){let e,o,x,b,g,y,k,w,E,T,C,A,$,B,D,P,V,q,N,z,G,O,H,M,W;return{c(){e=s("div"),o=s("div"),x=s("p"),b=u("Here's some tips:"),g=f(),y=s("p"),k=u("Tap the text to turn the pages."),w=f(),E=s("p"),T=u("Tap the images to zoom."),C=f(),A=s("p"),$=u("I'll help you out by keeping track of where you're up to."),B=f(),D=s("p"),P=u("I'll also scroll automatically to where the pages are so you\n\t\t\t\tdon't have to bother your finger..."),V=f(),q=s("div"),N=s("span"),z=u("Got it"),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=r(e);o=a(s,"DIV",{class:!0});var l=r(o);x=a(l,"P",{class:!0});var c=r(x);b=m(c,"Here's some tips:"),c.forEach(n),g=p(l),y=a(l,"P",{class:!0});var i=r(y);k=m(i,"Tap the text to turn the pages."),i.forEach(n),w=p(l),E=a(l,"P",{class:!0});var h=r(E);T=m(h,"Tap the images to zoom."),h.forEach(n),C=p(l),A=a(l,"P",{class:!0});var u=r(A);$=m(u,"I'll help you out by keeping track of where you're up to."),u.forEach(n),B=p(l),D=a(l,"P",{class:!0});var f=r(D);P=m(f,"I'll also scroll automatically to where the pages are so you\n\t\t\t\tdon't have to bother your finger..."),f.forEach(n),V=p(l),q=a(l,"DIV",{});var d=r(q);N=a(d,"SPAN",{class:!0});var v=r(N);z=m(v,"Got it"),v.forEach(n),d.forEach(n),l.forEach(n),s.forEach(n),this.h()},h(){l(x,"class","font-header text-xl md:text-2xl mb-4"),l(y,"class","font-sans text-base md:text-lg mb-1"),l(E,"class","font-sans text-base md:text-lg mb-1"),l(A,"class","font-sans text-base md:text-lg mb-1"),l(D,"class","font-sans text-base md:text-lg mb-1"),l(N,"class","inline-block text-base md:text-lg p-2 rounded-lg no-underline bg-oblivious cursor-pointer"),l(o,"class","rounded-lg bg-white p-2 md:p-16 flex flex-col text-center m-2"),l(e,"class","fixed inset-0 flex justify-center items-center bg-oblivious-opaque z-10")},m(s,a){c(s,e,a),d(e,o),d(o,x),d(x,b),d(o,g),d(o,y),d(y,k),d(o,w),d(o,E),d(E,T),d(o,C),d(o,A),d(A,$),d(o,B),d(o,D),d(D,P),d(o,V),d(o,q),d(q,N),d(N,z),H=!0,M||(W=i(N,"click",t[19]),M=!0)},p:h,i(t){H||(I((()=>{O&&O.end(1),G||(G=j(e,L,{delay:1e3})),G.start()})),H=!0)},o(t){G&&G.invalidate(),O=v(e,L,{}),H=!1},d(t){t&&n(e),t&&O&&O.end(),M=!1,W()}}}function W(t){let e,o,h,v,T,C,A,I,j,L,D,P,V,O,W,Y,_,S,X,F,K,Q,J,U,Z=t[11]?".":"";function tt(t,e){return t[10][0]<3?G:z}q.title=e="Oblivious | Book "+t[2]+", Chapter "+t[3]+" | An overlanding motorbike journey\n\t\tthrough West Africa";let et=tt(t),ot=et(t),st=t[9]&&H(t),at=t[12]&&M(t);return{c(){o=s("meta"),h=f(),v=s("article"),T=s("h2"),C=u("Book "),A=u(t[2]),I=u(", Chapter "),j=u(t[3]),L=f(),D=s("div"),V=f(),ot.c(),W=f(),Y=s("div"),_=u("Oblivious | Luke Gelmi"),S=u(Z),X=f(),st&&st.c(),F=f(),at&&at.c(),K=x(),this.h()},l(e){const s=b('[data-svelte="svelte-gmim4n"]',q.head);o=a(s,"META",{name:!0,content:!0}),s.forEach(n),h=p(e),v=a(e,"ARTICLE",{class:!0});var l=r(v);T=a(l,"H2",{class:!0});var c=r(T);C=m(c,"Book "),A=m(c,t[2]),I=m(c,", Chapter "),j=m(c,t[3]),c.forEach(n),L=p(l),D=a(l,"DIV",{class:!0,style:!0});var i=r(D);V=p(i),ot.l(i),i.forEach(n),W=p(l),Y=a(l,"DIV",{class:!0});var u=r(Y);_=m(u,"Oblivious | Luke Gelmi"),S=m(u,Z),u.forEach(n),l.forEach(n),X=p(e),st&&st.l(e),F=p(e),at&&at.l(e),K=x(),this.h()},h(){l(o,"name","description"),l(o,"content",t[1]),l(T,"class","font-header"),P=new $(V),l(D,"class","max-h-screen overflow-hidden no-scrollbar py-12 svelte-1hqhvkr"),l(D,"style",O=t[6]?.width?`columns: auto ${t[7]}px; column-gap: ${R}px; column-rule: 1px solid #000;`:""),l(Y,"class","text-xs text-center -mt-10"),l(v,"class","prose md:prose-xl text-justify mb-8 md:mb-12 pt-16")},m(e,s){d(q.head,o),c(e,h,s),c(e,v,s),d(v,T),d(T,C),d(T,A),d(T,I),d(T,j),d(v,L),d(v,D),P.m(t[0],D),d(D,V),ot.m(D,null),t[16](D),d(v,W),d(v,Y),d(Y,_),d(Y,S),c(e,X,s),st&&st.m(e,s),c(e,F,s),at&&at.m(e,s),c(e,K,s),Q=!0,J||(U=[i(N,"resize",t[15]),i(D,"click",t[14])],J=!0)},p(t,[s]){(!Q||12&s)&&e!==(e="Oblivious | Book "+t[2]+", Chapter "+t[3]+" | An overlanding motorbike journey\n\t\tthrough West Africa")&&(q.title=e),(!Q||2&s)&&l(o,"content",t[1]),(!Q||4&s)&&g(A,t[2]),(!Q||8&s)&&g(j,t[3]),(!Q||1&s)&&P.p(t[0]),et===(et=tt(t))&&ot?ot.p(t,s):(ot.d(1),ot=et(t),ot&&(ot.c(),ot.m(D,null))),(!Q||192&s&&O!==(O=t[6]?.width?`columns: auto ${t[7]}px; column-gap: ${R}px; column-rule: 1px solid #000;`:""))&&l(D,"style",O),(!Q||2048&s)&&Z!==(Z=t[11]?".":"")&&g(S,Z),t[9]?st?(st.p(t,s),512&s&&y(st,1)):(st=H(t),st.c(),y(st,1),st.m(F.parentNode,F)):st&&(st.d(1),st=null),t[12]?at?(at.p(t,s),4096&s&&y(at,1)):(at=M(t),at.c(),y(at,1),at.m(K.parentNode,K)):at&&(B(),k(at,1,1,(()=>{at=null})),w())},i(t){Q||(y(st),y(at),Q=!0)},o(t){k(at),Q=!1},d(e){n(o),e&&n(h),e&&n(v),ot.d(),t[16](null),e&&n(X),st&&st.d(e),e&&n(F),at&&at.d(e),e&&n(K),J=!1,E(U)}}}var Y=function(t,e,o,s){return new(o||(o=Promise))((function(a,r){function n(t){try{c(s.next(t))}catch(t){r(t)}}function l(t){try{c(s.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(n,l)}c((s=s.apply(t,e||[])).next())}))};function _({params:t,query:e}){return Y(this,void 0,void 0,(function*(){const[e,o]=t.slug.map((t=>+t)),s=yield this.fetch(`read/${e}/${o}.json`),{chapter:a,snippet:r,nextChapterExists:n,message:l}=yield s.json();if(200===s.status)return{content:a,snippet:r,book:e,chapter:o,nextChapterExists:n};this.error(s.status,l)}))}let R=50;function S(t,e,o){let s;T(t,P,(t=>o(12,s=t)));let a,r,n,l,c,i,{content:h}=e,{snippet:u}=e,{book:f}=e,{chapter:m}=e,{nextChapterExists:p}=e,d=!1,v=!1;const x=()=>{o(6,r=a.getBoundingClientRect()),o(7,n=Math.round(r.width))},b=(g=()=>{const t=a.scrollLeft;setTimeout((()=>{const e=a.scrollLeft%(n+R);if(t===a.scrollLeft&&e){const t=e/(n+R)<.5?-e:n+R-e;V(a,[a.scrollLeft,a.scrollTop],[a.scrollLeft+t,a.scrollLeft],300)}}),50)},y=1e3,function(){clearTimeout(k),k=setTimeout((function(){g()}),y)});var g,y,k;C((()=>{setTimeout((()=>{x(),l=(window.pageYOffset||document.documentElement.scrollTop)+r.top}),600),setTimeout((()=>{V(window,[window.scrollX,window.scrollY],[window.scrollX,l],600)}),2e3)}));return t.$$set=t=>{"content"in t&&o(0,h=t.content),"snippet"in t&&o(1,u=t.snippet),"book"in t&&o(2,f=t.book),"chapter"in t&&o(3,m=t.chapter),"nextChapterExists"in t&&o(4,p=t.nextChapterExists)},t.$$.update=()=>{28&t.$$.dirty&&o(10,i=!p&&f<3?[f+1,1]:[f,m+1])},[h,u,f,m,p,a,r,n,c,d,i,v,s,x,({clientX:t,target:e})=>{if("IMG"===e.tagName)o(9,d=!0),setTimeout((()=>{o(8,c.innerHTML=e.outerHTML,c)}),1);else if(t&&r&&r.left&&n){const e=r.left+n/2,o=n+R;V(a,[a.scrollLeft,a.scrollTop],[a.scrollLeft+(t<=e?-1:1)*o,a.scrollTop],300,b)}},()=>{x(),o(11,v=!0)},function(t){D[t?"unshift":"push"]((()=>{a=t,o(5,a)}))},function(t){D[t?"unshift":"push"]((()=>{c=t,o(8,c)}))},()=>o(9,d=!1),()=>{P.set(!1)}]}export default class extends t{constructor(t){super(),e(this,t,S,W,o,{content:0,snippet:1,book:2,chapter:3,nextChapterExists:4})}}export{_ as preload};
