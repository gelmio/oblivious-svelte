import{S as t,i as e,s as o,e as s,c as a,b as r,f as l,h as n,j as c,l as i,y as h,t as u,a as f,g as d,d as m,k as p,C as v,D as x,v as b,m as g,z as y,A as k,E as w,r as E,G as T,O as C,Q as A,n as I,I as j,q as $,R as B,K as D,T as L}from"./client.8f468a7b.js";import{g as P}from"./reader-hints.2d502731.js";function V(t,e,o,s){let a;console.log(...arguments);const r=l=>{const n=l-a,c=n/s,i=[e[0]+(o[0]-e[0])*c,e[1]+(o[1]-e[1])*c];n<s?(t.scrollTo(i[0],i[1]),requestAnimationFrame(r)):t.scrollTo(o[0],o[1])};requestAnimationFrame((t=>{a=t,r(t)}))}const{document:q,window:N}=A;function z(t){let e,o,i,v,x,b,g,y,k,w,E;return{c(){e=s("div"),o=s("p"),i=u("Congrats! You've made it to the end of Book 2!"),v=f(),x=s("p"),b=u("That's as far as things go for the moment, but Book 3 is on\n\t\t\t\t\tthe way out soon!"),g=f(),y=s("p"),k=u("While you wait, feel free to jump on the mailing list, or "),w=s("a"),E=u("flick me some money to keep the wheels rolling!"),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=r(e);o=a(s,"P",{});var n=r(o);i=d(n,"Congrats! You've made it to the end of Book 2!"),n.forEach(l),v=m(s),x=a(s,"P",{});var c=r(x);b=d(c,"That's as far as things go for the moment, but Book 3 is on\n\t\t\t\t\tthe way out soon!"),c.forEach(l),g=m(s),y=a(s,"P",{});var h=r(y);k=d(h,"While you wait, feel free to jump on the mailing list, or "),w=a(h,"A",{href:!0,rel:!0,class:!0});var u=r(w);E=d(u,"flick me some money to keep the wheels rolling!"),u.forEach(l),h.forEach(l),s.forEach(l),this.h()},h(){n(w,"href","https://transactions.sendowl.com/products/78458726/77A44CD1/add_to_cart"),n(w,"rel","nofollow"),n(w,"class","border-b border-oblivious-dark"),n(e,"class","text-center font-header mt-8")},m(t,s){c(t,e,s),p(e,o),p(o,i),p(e,v),p(e,x),p(x,b),p(e,g),p(e,y),p(y,k),p(y,w),p(w,E)},p:h,d(t){t&&l(e)}}}function G(t){let e,o,i,h,v,x,b=t[3]?"Chapter":"Book",y=t[9][1]>10&&!(t[9][1]%5)&&O();return{c(){e=s("div"),o=s("a"),i=u("Next "),h=u(b),x=f(),y&&y.c(),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=r(e);o=a(s,"A",{rel:!0,href:!0,class:!0});var n=r(o);i=d(n,"Next "),h=d(n,b),n.forEach(l),x=m(s),y&&y.l(s),s.forEach(l),this.h()},h(){n(o,"rel","prefetch"),n(o,"href",v="read/"+t[9][0]+"/"+t[9][1]),n(o,"class","inline-block text-lg p-2 rounded-lg no-underline bg-oblivious mr-4"),n(e,"class","flex flex-col md:flex-row justify-end items-end mt-8")},m(t,s){c(t,e,s),p(e,o),p(o,i),p(o,h),p(e,x),y&&y.m(e,null)},p(t,s){8&s&&b!==(b=t[3]?"Chapter":"Book")&&g(h,b),512&s&&v!==(v="read/"+t[9][0]+"/"+t[9][1])&&n(o,"href",v),t[9][1]>10&&!(t[9][1]%5)?y||(y=O(),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},d(t){t&&l(e),y&&y.d()}}}function O(t){let e,o,i,h;return{c(){e=s("span"),o=u("... or "),i=s("a"),h=u("flick me some money!"),this.h()},l(t){e=a(t,"SPAN",{class:!0});var s=r(e);o=d(s,"... or "),i=a(s,"A",{href:!0,rel:!0,class:!0});var n=r(i);h=d(n,"flick me some money!"),n.forEach(l),s.forEach(l),this.h()},h(){n(i,"href","https://transactions.sendowl.com/products/78458726/77A44CD1/add_to_cart"),n(i,"rel","nofollow"),n(i,"class","border-b border-oblivious-dark"),n(e,"class","m-2")},m(t,s){c(t,e,s),p(e,o),p(e,i),p(i,h)},d(t){t&&l(e)}}}function H(t){let e,o,u,f;return{c(){e=s("div"),this.h()},l(t){e=a(t,"DIV",{class:!0}),r(e).forEach(l),this.h()},h(){n(e,"class","fixed inset-0 flex justify-center items-center cursor-zoom-out bg-oblivious-opaque")},m(o,s){c(o,e,s),t[16](e),u||(f=i(e,"click",t[17]),u=!0)},p:h,i(t){o||I((()=>{o=j(e,$,{}),o.start()}))},o:h,d(o){o&&l(e),t[16](null),u=!1,f()}}}function M(t){let e,o,x,b,g,y,k,w,E,T,C,A,B,D,L,P,V,q,N,z,G,O,H,M,W;return{c(){e=s("div"),o=s("div"),x=s("p"),b=u("Here's some tips:"),g=f(),y=s("p"),k=u("Tap the text to turn the pages."),w=f(),E=s("p"),T=u("Tap the images to zoom."),C=f(),A=s("p"),B=u("I'll help you out by keeping track of where you're up to."),D=f(),L=s("p"),P=u("I'll also scroll automatically to where the pages are so you\n\t\t\t\tdon't have to bother your finger..."),V=f(),q=s("div"),N=s("span"),z=u("Got it"),this.h()},l(t){e=a(t,"DIV",{class:!0});var s=r(e);o=a(s,"DIV",{class:!0});var n=r(o);x=a(n,"P",{class:!0});var c=r(x);b=d(c,"Here's some tips:"),c.forEach(l),g=m(n),y=a(n,"P",{class:!0});var i=r(y);k=d(i,"Tap the text to turn the pages."),i.forEach(l),w=m(n),E=a(n,"P",{class:!0});var h=r(E);T=d(h,"Tap the images to zoom."),h.forEach(l),C=m(n),A=a(n,"P",{class:!0});var u=r(A);B=d(u,"I'll help you out by keeping track of where you're up to."),u.forEach(l),D=m(n),L=a(n,"P",{class:!0});var f=r(L);P=d(f,"I'll also scroll automatically to where the pages are so you\n\t\t\t\tdon't have to bother your finger..."),f.forEach(l),V=m(n),q=a(n,"DIV",{});var p=r(q);N=a(p,"SPAN",{class:!0});var v=r(N);z=d(v,"Got it"),v.forEach(l),p.forEach(l),n.forEach(l),s.forEach(l),this.h()},h(){n(x,"class","font-header text-xl md:text-2xl mb-4"),n(y,"class","font-sans text-base md:text-lg mb-1"),n(E,"class","font-sans text-base md:text-lg mb-1"),n(A,"class","font-sans text-base md:text-lg mb-1"),n(L,"class","font-sans text-base md:text-lg mb-1"),n(N,"class","inline-block text-base md:text-lg p-2 rounded-lg no-underline bg-oblivious cursor-pointer"),n(o,"class","rounded-lg bg-white p-2 md:p-16 flex flex-col text-center m-2"),n(e,"class","fixed inset-0 flex justify-center items-center bg-oblivious-opaque z-10")},m(s,a){c(s,e,a),p(e,o),p(o,x),p(x,b),p(o,g),p(o,y),p(y,k),p(o,w),p(o,E),p(E,T),p(o,C),p(o,A),p(A,B),p(o,D),p(o,L),p(L,P),p(o,V),p(o,q),p(q,N),p(N,z),H=!0,M||(W=i(N,"click",t[18]),M=!0)},p:h,i(t){H||(I((()=>{O&&O.end(1),G||(G=j(e,$,{delay:1e3})),G.start()})),H=!0)},o(t){G&&G.invalidate(),O=v(e,$,{}),H=!1},d(t){t&&l(e),t&&O&&O.end(),M=!1,W()}}}function W(t){let e,o,h,v,T,C,A,I,j,$,L,P,V,O,W,Y,_,X,F,K,Q,J;function U(t,e){return t[9][0]<3?G:z}q.title=e="Oblivious | Book "+t[1]+", Chapter "+t[2]+" | An overlanding motorbike journey\n\t\tthrough West Africa";let Z=U(t),tt=Z(t),et=t[8]&&H(t),ot=t[10]&&M(t);return{c(){o=f(),h=s("article"),v=s("h2"),T=u("Book "),C=u(t[1]),A=u(", Chapter "),I=u(t[2]),j=f(),$=s("div"),P=f(),tt.c(),O=f(),W=s("div"),Y=u("Oblivious | Luke Gelmi"),_=f(),et&&et.c(),X=f(),ot&&ot.c(),F=x(),this.h()},l(e){b('[data-svelte="svelte-ngr10r"]',q.head).forEach(l),o=m(e),h=a(e,"ARTICLE",{class:!0});var s=r(h);v=a(s,"H2",{class:!0});var n=r(v);T=d(n,"Book "),C=d(n,t[1]),A=d(n,", Chapter "),I=d(n,t[2]),n.forEach(l),j=m(s),$=a(s,"DIV",{class:!0,style:!0});var c=r($);P=m(c),tt.l(c),c.forEach(l),O=m(s),W=a(s,"DIV",{class:!0});var i=r(W);Y=d(i,"Oblivious | Luke Gelmi"),i.forEach(l),s.forEach(l),_=m(e),et&&et.l(e),X=m(e),ot&&ot.l(e),F=x(),this.h()},h(){n(v,"class","font-header"),L=new B(P),n($,"class","max-h-screen overflow-hidden overflow-x-scroll no-scrollbar py-12 svelte-1hqhvkr"),n($,"style",V=t[5]?.width?`columns: auto ${t[6]}px; column-gap: ${R}px; column-rule: 1px solid #000;`:""),n(W,"class","text-xs text-center -mt-10"),n(h,"class","prose md:prose-xl text-justify mb-8 md:mb-12 pt-16")},m(e,s){c(e,o,s),c(e,h,s),p(h,v),p(v,T),p(v,C),p(v,A),p(v,I),p(h,j),p(h,$),L.m(t[0],$),p($,P),tt.m($,null),t[15]($),p(h,O),p(h,W),p(W,Y),c(e,_,s),et&&et.m(e,s),c(e,X,s),ot&&ot.m(e,s),c(e,F,s),K=!0,Q||(J=[i(N,"resize",t[14]),i($,"click",t[12]),i($,"touchend",S(t[13],4e3))],Q=!0)},p(t,[o]){(!K||6&o)&&e!==(e="Oblivious | Book "+t[1]+", Chapter "+t[2]+" | An overlanding motorbike journey\n\t\tthrough West Africa")&&(q.title=e),(!K||2&o)&&g(C,t[1]),(!K||4&o)&&g(I,t[2]),(!K||1&o)&&L.p(t[0]),Z===(Z=U(t))&&tt?tt.p(t,o):(tt.d(1),tt=Z(t),tt&&(tt.c(),tt.m($,null))),(!K||96&o&&V!==(V=t[5]?.width?`columns: auto ${t[6]}px; column-gap: ${R}px; column-rule: 1px solid #000;`:""))&&n($,"style",V),t[8]?et?(et.p(t,o),256&o&&y(et,1)):(et=H(t),et.c(),y(et,1),et.m(X.parentNode,X)):et&&(et.d(1),et=null),t[10]?ot?(ot.p(t,o),1024&o&&y(ot,1)):(ot=M(t),ot.c(),y(ot,1),ot.m(F.parentNode,F)):ot&&(D(),k(ot,1,1,(()=>{ot=null})),w())},i(t){K||(y(et),y(ot),K=!0)},o(t){k(ot),K=!1},d(e){e&&l(o),e&&l(h),tt.d(),t[15](null),e&&l(_),et&&et.d(e),e&&l(X),ot&&ot.d(e),e&&l(F),Q=!1,E(J)}}}var Y=function(t,e,o,s){return new(o||(o=Promise))((function(a,r){function l(t){try{c(s.next(t))}catch(t){r(t)}}function n(t){try{c(s.throw(t))}catch(t){r(t)}}function c(t){var e;t.done?a(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(l,n)}c((s=s.apply(t,e||[])).next())}))};function _({params:t,query:e}){return Y(this,void 0,void 0,(function*(){const[e,o]=t.slug.map((t=>+t)),s=yield this.fetch(`read/${e}/${o}.json`),{chapter:a,nextChapterExists:r,message:l}=yield s.json();if(200===s.status)return{content:a,book:e,chapter:o,nextChapterExists:r};this.error(s.status,l)}))}let R=50;function S(t,e){var o;return function(){clearTimeout(o),o=setTimeout((function(){t()}),e)}}function X(t,e,o){let s;T(t,P,(t=>o(10,s=t)));let a,r,l,n,c,i,{content:h}=e,{book:u}=e,{chapter:f}=e,{nextChapterExists:d}=e,m=!1;const p=()=>{o(5,r=a.getBoundingClientRect()),o(6,l=Math.round(r.width))},v=()=>{const t=a.scrollLeft%(l+R),e=t/(l+R)<.5?-t:l+R-t;V(a,[a.scrollLeft,a.scrollTop],[a.scrollLeft+e,a.scrollLeft],300)};C((()=>{setTimeout((()=>{p(),n=(window.pageYOffset||document.documentElement.scrollTop)+r.top}),600),setTimeout((()=>{V(window,[window.scrollX,window.scrollY],[window.scrollX,n],300)}),2e3)}));return t.$$set=t=>{"content"in t&&o(0,h=t.content),"book"in t&&o(1,u=t.book),"chapter"in t&&o(2,f=t.chapter),"nextChapterExists"in t&&o(3,d=t.nextChapterExists)},t.$$.update=()=>{14&t.$$.dirty&&o(9,i=!d&&u<3?[u+1,1]:[u,f+1])},[h,u,f,d,a,r,l,c,m,i,s,p,({clientX:t,target:e})=>{if("IMG"===e.tagName)o(8,m=!0),setTimeout((()=>{o(7,c.innerHTML=e.outerHTML,c)}),1);else if(t&&r&&r.left&&l){const e=r.left+l/2,o=l+R;V(a,[a.scrollLeft,a.scrollTop],[a.scrollLeft+(t<=e?-1:1)*o,a.scrollTop],300),S(v,1e3)()}},v,()=>p(),function(t){L[t?"unshift":"push"]((()=>{a=t,o(4,a)}))},function(t){L[t?"unshift":"push"]((()=>{c=t,o(7,c)}))},()=>o(8,m=!1),()=>{P.set(!1)}]}export default class extends t{constructor(t){super(),e(this,t,X,W,o,{content:0,book:1,chapter:2,nextChapterExists:3})}}export{_ as preload};
