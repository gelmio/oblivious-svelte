import{S as e,i as t,s as o,e as s,c as a,b as r,f as l,h as n,j as c,l as i,B as u,a as h,t as f,E as d,v as p,d as m,g as v,k as b,m as x,y as g,z as y,F as k,r as E,H as w,I as T,Q as I,R as C,n as L,J as A,T as j,L as P,U as $,q as B,C as D}from"./client.c0fc3f13.js";import{r as N,g as V}from"./reader-hints.8ada7576.js";function q(e,t,o,s,a=null){let r;const l=n=>{const c=n-r,i=c/s,u=[t[0]+(o[0]-t[0])*i,t[1]+(o[1]-t[1])*i];c<s?(e.scrollTo(u[0],u[1]),requestAnimationFrame(l)):(e.scrollTo(o[0],o[1]),a&&a())};requestAnimationFrame((e=>{r=e,l(e)}))}const{document:O,window:H}=C;function z(e){let t,o,d,p,x,g,y,k,E,w,T,I,C;return{c(){t=s("div"),o=s("p"),d=f("Congrats! You've made it to the end of Book 2!"),p=h(),x=s("p"),g=f("That's as far as things go for the moment, but Book 3 is on\n\t\t\t\t\tthe way out soon!"),y=h(),k=s("p"),E=f("While you wait, feel free to jump on the mailing list, or maybe even "),w=s("a"),T=f("buy me a coffee!"),this.h()},l(e){t=a(e,"DIV",{class:!0});var s=r(t);o=a(s,"P",{});var n=r(o);d=v(n,"Congrats! You've made it to the end of Book 2!"),n.forEach(l),p=m(s),x=a(s,"P",{});var c=r(x);g=v(c,"That's as far as things go for the moment, but Book 3 is on\n\t\t\t\t\tthe way out soon!"),c.forEach(l),y=m(s),k=a(s,"P",{});var i=r(k);E=v(i,"While you wait, feel free to jump on the mailing list, or maybe even "),w=a(i,"A",{href:!0,rel:!0,class:!0});var u=r(w);T=v(u,"buy me a coffee!"),u.forEach(l),i.forEach(l),s.forEach(l),this.h()},h(){n(w,"href","https://transactions.sendowl.com/products/78458726/77A44CD1/add_to_cart"),n(w,"rel","nofollow"),n(w,"class","border-b border-oblivious-dark"),n(t,"class","text-center font-header mt-8")},m(e,s){c(e,t,s),b(t,o),b(o,d),b(t,p),b(t,x),b(x,g),b(t,y),b(t,k),b(k,E),b(k,w),b(w,T),I||(C=i(w,"click",Q),I=!0)},p:u,d(e){e&&l(t),I=!1,C()}}}function W(e){let t,o,u,d,p,g,y,k,E=e[3]?"Chapter":"Book",w=e[10][1]>10&&!(e[10][1]%5)&&M();return{c(){t=s("div"),o=s("a"),u=f("Next "),d=f(E),g=h(),w&&w.c(),this.h()},l(e){t=a(e,"DIV",{class:!0});var s=r(t);o=a(s,"A",{rel:!0,href:!0,class:!0});var n=r(o);u=v(n,"Next "),d=v(n,E),n.forEach(l),g=m(s),w&&w.l(s),s.forEach(l),this.h()},h(){n(o,"rel","prefetch"),n(o,"href",p="read/"+e[10][0]+"/"+e[10][1]),n(o,"class","inline-block text-lg p-2 rounded-lg no-underline bg-oblivious mr-4"),n(t,"class","flex flex-col md:flex-row justify-end items-end mt-8")},m(e,s){c(e,t,s),b(t,o),b(o,u),b(o,d),b(t,g),w&&w.m(t,null),y||(k=i(o,"click",X),y=!0)},p(e,s){8&s[0]&&E!==(E=e[3]?"Chapter":"Book")&&x(d,E),1024&s[0]&&p!==(p="read/"+e[10][0]+"/"+e[10][1])&&n(o,"href",p),e[10][1]>10&&!(e[10][1]%5)?w||(w=M(),w.c(),w.m(t,null)):w&&(w.d(1),w=null)},d(e){e&&l(t),w&&w.d(),y=!1,k()}}}function M(e){let t,o,u,h,d,p;return{c(){t=s("span"),o=f("... or "),u=s("a"),h=f("buy me a coffee!"),this.h()},l(e){t=a(e,"SPAN",{class:!0});var s=r(t);o=v(s,"... or "),u=a(s,"A",{href:!0,rel:!0,class:!0});var n=r(u);h=v(n,"buy me a coffee!"),n.forEach(l),s.forEach(l),this.h()},h(){n(u,"href","https://transactions.sendowl.com/products/78458726/77A44CD1/add_to_cart"),n(u,"rel","nofollow"),n(u,"class","border-b border-oblivious-dark"),n(t,"class","m-2")},m(e,s){c(e,t,s),b(t,o),b(t,u),b(u,h),d||(p=i(u,"click",J),d=!0)},d(e){e&&l(t),d=!1,p()}}}function S(e){let t,o,h,f;return{c(){t=s("div"),this.h()},l(e){t=a(e,"DIV",{class:!0}),r(t).forEach(l),this.h()},h(){n(t,"class","fixed inset-0 flex justify-center items-center cursor-zoom-out bg-oblivious-opaque")},m(o,s){c(o,t,s),e[18](t),h||(f=i(t,"click",e[19]),h=!0)},p:u,i(e){o||L((()=>{o=A(t,B,{}),o.start()}))},o:u,d(o){o&&l(t),e[18](null),h=!1,f()}}}function G(e){let t,o,d,p,x,g,y,k,w,T,I,C,j,P,$,D,N;return{c(){t=s("div"),o=s("div"),d=s("p"),p=f("Looks like you've been here before..."),x=h(),g=s("p"),y=f("Want to jump to the last page you were reading?"),k=h(),w=s("div"),T=s("button"),I=f("Sure"),C=h(),j=s("button"),P=f("Nup"),this.h()},l(e){t=a(e,"DIV",{class:!0});var s=r(t);o=a(s,"DIV",{class:!0});var n=r(o);d=a(n,"P",{class:!0});var c=r(d);p=v(c,"Looks like you've been here before..."),c.forEach(l),x=m(n),g=a(n,"P",{class:!0});var i=r(g);y=v(i,"Want to jump to the last page you were reading?"),i.forEach(l),k=m(n),w=a(n,"DIV",{});var u=r(w);T=a(u,"BUTTON",{class:!0});var h=r(T);I=v(h,"Sure"),h.forEach(l),C=m(u),j=a(u,"BUTTON",{class:!0});var f=r(j);P=v(f,"Nup"),f.forEach(l),u.forEach(l),n.forEach(l),s.forEach(l),this.h()},h(){n(d,"class","font-header text-xl md:text-2xl"),n(g,"class","font-sans text-base md:text-lg mb-4"),n(T,"class","inline-block text-base md:text-lg p-2 rounded-lg no-underline bg-oblivious"),n(j,"class","inline-block text-base md:text-lg p-2 rounded-lg no-underline bg-white border border-solid border-oblivious cursor-pointer"),n(o,"class","rounded-lg bg-white p-2 md:p-16 flex flex-col text-center m-2"),n(t,"class","fixed inset-0 flex justify-center items-center bg-oblivious-opaque z-10")},m(s,a){c(s,t,a),b(t,o),b(o,d),b(d,p),b(o,x),b(o,g),b(g,y),b(o,k),b(o,w),b(w,T),b(T,I),b(w,C),b(w,j),b(j,P),D||(N=[i(T,"click",e[21]),i(j,"click",e[22])],D=!0)},p:u,i(e){$||L((()=>{$=A(t,B,{delay:1e3}),$.start()}))},o:u,d(e){e&&l(t),D=!1,E(N)}}}function Y(e){let t,o,d,p,x,g,y,k,E,w,T,I,C,j,P,$,N,V,q,O,H,z,W,M,S;return{c(){t=s("div"),o=s("div"),d=s("p"),p=f("Here's some tips:"),x=h(),g=s("p"),y=f("Tap the text to turn the pages."),k=h(),E=s("p"),w=f("Tap the images to zoom."),T=h(),I=s("p"),C=f("I'll help you out by keeping track of where you're up to."),j=h(),P=s("p"),$=f("I'll also scroll automatically to where the pages are so you\n\t\t\t\tdon't have to bother your finger..."),N=h(),V=s("div"),q=s("span"),O=f("Got it"),this.h()},l(e){t=a(e,"DIV",{class:!0});var s=r(t);o=a(s,"DIV",{class:!0});var n=r(o);d=a(n,"P",{class:!0});var c=r(d);p=v(c,"Here's some tips:"),c.forEach(l),x=m(n),g=a(n,"P",{class:!0});var i=r(g);y=v(i,"Tap the text to turn the pages."),i.forEach(l),k=m(n),E=a(n,"P",{class:!0});var u=r(E);w=v(u,"Tap the images to zoom."),u.forEach(l),T=m(n),I=a(n,"P",{class:!0});var h=r(I);C=v(h,"I'll help you out by keeping track of where you're up to."),h.forEach(l),j=m(n),P=a(n,"P",{class:!0});var f=r(P);$=v(f,"I'll also scroll automatically to where the pages are so you\n\t\t\t\tdon't have to bother your finger..."),f.forEach(l),N=m(n),V=a(n,"DIV",{});var b=r(V);q=a(b,"SPAN",{class:!0});var L=r(q);O=v(L,"Got it"),L.forEach(l),b.forEach(l),n.forEach(l),s.forEach(l),this.h()},h(){n(d,"class","font-header text-xl md:text-2xl mb-4"),n(g,"class","font-sans text-base md:text-lg mb-1"),n(E,"class","font-sans text-base md:text-lg mb-1"),n(I,"class","font-sans text-base md:text-lg mb-1"),n(P,"class","font-sans text-base md:text-lg mb-1"),n(q,"class","inline-block text-base md:text-lg p-2 rounded-lg no-underline bg-oblivious cursor-pointer"),n(o,"class","rounded-lg bg-white p-2 md:p-16 flex flex-col text-center m-2"),n(t,"class","fixed inset-0 flex justify-center items-center bg-oblivious-opaque z-10")},m(s,a){c(s,t,a),b(t,o),b(o,d),b(d,p),b(o,x),b(o,g),b(g,y),b(o,k),b(o,E),b(E,w),b(o,T),b(o,I),b(I,C),b(o,j),b(o,P),b(P,$),b(o,N),b(o,V),b(V,q),b(q,O),W=!0,M||(S=i(q,"click",e[20]),M=!0)},p:u,i(e){W||(L((()=>{z&&z.end(1),H||(H=A(t,B,{delay:1e3})),H.start()})),W=!0)},o(e){H&&H.invalidate(),z=D(t,B,{}),W=!1},d(e){e&&l(t),e&&z&&z.end(),M=!1,S()}}}function _(e){let t,o,u,w,T,I,C,L,A,$,B,D,N,V,q,M,_,F,R,X,J,Q,K,Z;function ee(e,t){return e[10][0]<3?W:z}O.title=t="Oblivious | Book "+e[1]+", Chapter "+e[2]+" | An overlanding motorbike journey through West Africa";let te=ee(e),oe=te(e),se=e[8]&&S(e);const ae=[Y,G],re=[];function le(e,t){return e[11]?0:e[9]?1:-1}return~(R=le(e))&&(X=re[R]=ae[R](e)),{c(){o=h(),u=s("article"),w=s("h2"),T=f("Book "),I=f(e[1]),C=f(", Chapter "),L=f(e[2]),A=h(),$=s("div"),D=h(),oe.c(),V=h(),q=s("div"),M=f("Oblivious | Luke Gelmi"),_=h(),se&&se.c(),F=h(),X&&X.c(),J=d(),this.h()},l(t){p('[data-svelte="svelte-1uu6ren"]',O.head).forEach(l),o=m(t),u=a(t,"ARTICLE",{class:!0});var s=r(u);w=a(s,"H2",{class:!0});var n=r(w);T=v(n,"Book "),I=v(n,e[1]),C=v(n,", Chapter "),L=v(n,e[2]),n.forEach(l),A=m(s),$=a(s,"DIV",{class:!0,style:!0});var c=r($);D=m(c),oe.l(c),c.forEach(l),V=m(s),q=a(s,"DIV",{class:!0});var i=r(q);M=v(i,"Oblivious | Luke Gelmi"),i.forEach(l),s.forEach(l),_=m(t),se&&se.l(t),F=m(t),X&&X.l(t),J=d(),this.h()},h(){n(w,"class","font-header"),B=new j(D),n($,"class","reader relative overflow-hidden no-scrollbar py-12 svelte-1hqhvkr"),n($,"style",N=e[5]&&e[6]?`height: ${e[6]}px; columns: auto ${e[5]}px; column-gap: ${U}px; column-rule: 1px solid #000;`:""),n(q,"class","text-xs text-center -mt-10"),n(u,"class","prose md:prose-xl text-justify mb-8 md:mb-12 pt-16")},m(t,s){c(t,o,s),c(t,u,s),b(u,w),b(w,T),b(w,I),b(w,C),b(w,L),b(u,A),b(u,$),B.m(e[0],$),b($,D),oe.m($,null),e[17]($),b(u,V),b(u,q),b(q,M),c(t,_,s),se&&se.m(t,s),c(t,F,s),~R&&re[R].m(t,s),c(t,J,s),Q=!0,K||(Z=[i(H,"resize",e[16]),i($,"click",e[14])],K=!0)},p(e,o){(!Q||6&o[0])&&t!==(t="Oblivious | Book "+e[1]+", Chapter "+e[2]+" | An overlanding motorbike journey through West Africa")&&(O.title=t),(!Q||2&o[0])&&x(I,e[1]),(!Q||4&o[0])&&x(L,e[2]),(!Q||1&o[0])&&B.p(e[0]),te===(te=ee(e))&&oe?oe.p(e,o):(oe.d(1),oe=te(e),oe&&(oe.c(),oe.m($,null))),(!Q||96&o[0]&&N!==(N=e[5]&&e[6]?`height: ${e[6]}px; columns: auto ${e[5]}px; column-gap: ${U}px; column-rule: 1px solid #000;`:""))&&n($,"style",N),e[8]?se?(se.p(e,o),256&o[0]&&g(se,1)):(se=S(e),se.c(),g(se,1),se.m(F.parentNode,F)):se&&(se.d(1),se=null);let s=R;R=le(e),R===s?~R&&re[R].p(e,o):(X&&(P(),y(re[s],1,1,(()=>{re[s]=null})),k()),~R?(X=re[R],X||(X=re[R]=ae[R](e),X.c()),g(X,1),X.m(J.parentNode,J)):X=null)},i(e){Q||(g(se),g(X),Q=!0)},o(e){y(X),Q=!1},d(t){t&&l(o),t&&l(u),oe.d(),e[17](null),t&&l(_),se&&se.d(t),t&&l(F),~R&&re[R].d(t),t&&l(J),K=!1,E(Z)}}}var F=function(e,t,o,s){return new(o||(o=Promise))((function(a,r){function l(e){try{c(s.next(e))}catch(e){r(e)}}function n(e){try{c(s.throw(e))}catch(e){r(e)}}function c(e){var t;e.done?a(e.value):(t=e.value,t instanceof o?t:new o((function(e){e(t)}))).then(l,n)}c((s=s.apply(e,t||[])).next())}))};function R({params:e,query:t}){return F(this,void 0,void 0,(function*(){const[t,o]=e.slug.map((e=>+e)),s=yield this.fetch(`read/${t}/${o}.json`),{chapter:a,nextChapterExists:r,message:l}=yield s.json();if(200===s.status)return{content:a,book:t,chapter:o,nextChapterExists:r};this.error(s.status,l)}))}let U=50;const X=e=>e.stopPropagation(),J=e=>e.stopPropagation(),Q=e=>e.stopPropagation();function K(e,t,o){let s,a,r;w(e,N,(e=>o(30,a=e))),w(e,V,(e=>o(11,r=e)));let l,n,c,i,u,h,f,d,p,m,{content:v}=t,{book:b}=t,{chapter:x}=t,{nextChapterExists:g}=t,y=!1,k=!1;const{page:E}=T();function C(){l&&(c=[window.innerWidth,window.innerHeight],(!n||!u||!i||c[0]<i||c[1]<u||c[0]>i+100||c[1]>u+100)&&(o(6,u=Math.round(c[1])),n=l.getBoundingClientRect(),o(5,i=Math.round(n.width))))}w(e,E,(e=>o(29,s=e)));const L=(A=()=>{const e=l.scrollLeft;setTimeout((()=>{const t=l.scrollLeft%(i+U);if(e===l.scrollLeft&&t){const e=t/(i+U)<.5?-t:i+U-t;q(l,[l.scrollLeft,l.scrollTop],[l.scrollLeft+e,l.scrollLeft],300)}}),50)},j=1e3,function(){clearTimeout(P),P=setTimeout((function(){A()}),j)});var A,j,P;function B(){const e=m[a[2]-1];e instanceof HTMLElement&&q(l,[l.scrollLeft,l.scrollTop],[e.offsetLeft,l.scrollTop],300,L)}function D(){m&&m.length>0&&(p=new IntersectionObserver((e=>{if(!0===e[0].isIntersecting){const t=Array.from(m).indexOf(e[0].target);t>-1&&t>a[2]-1&&N.set([O[0],O[1],t+1])}}),{threshold:[0]}),Array.from(m).forEach((e=>p.observe(e))))}I((()=>{var e,t;m=document.querySelectorAll(".reader p"),O&&(t=O,(!(e=a)||!e[0]||!e[1])&&t||t[0]>e[0]||t[0]===e[0]&&t[1]>e[1])?(N.set([O[0],O[1],1]),D()):a[0]===O[0]&&a[1]===O[1]&&a[2]>1?(o(9,k=!0),D()):a[0]===O[0]&&a[1]===O[1]&&1===a[2]&&D(),C(),setTimeout((()=>{C(),h=(window.pageYOffset||document.documentElement.scrollTop)+n.top,q(window,[window.scrollX,window.scrollY],[window.scrollX,h],600)}),2e3)}));let O;return e.$$set=e=>{"content"in e&&o(0,v=e.content),"book"in e&&o(1,b=e.book),"chapter"in e&&o(2,x=e.chapter),"nextChapterExists"in e&&o(3,g=e.nextChapterExists)},e.$$.update=()=>{536870912&e.$$.dirty[0]&&(O=s.params.slug?s.params.slug.map((e=>+e)):null),14&e.$$.dirty[0]&&o(10,d=!g&&b<3?[b+1,1]:[b,x+1])},[v,b,x,g,l,i,u,f,y,k,d,r,E,C,({clientX:e,target:t})=>{if("IMG"===t.tagName)o(8,y=!0),setTimeout((()=>{o(7,f.innerHTML=t.outerHTML,f)}),1);else if(e&&n&&n.left&&i){const t=n.left+i/2,o=i+U;q(l,[l.scrollLeft,l.scrollTop],[l.scrollLeft+(e<=t?-1:1)*o,l.scrollTop],300,L)}},B,()=>C(),function(e){$[e?"unshift":"push"]((()=>{l=e,o(4,l)}))},function(e){$[e?"unshift":"push"]((()=>{f=e,o(7,f)}))},()=>o(8,y=!1),()=>{V.set(!1)},()=>{o(9,k=!1),B()},()=>{o(9,k=!1),N.set([N[0],N[1],1])}]}export default class extends e{constructor(e){super(),t(this,e,K,_,o,{content:0,book:1,chapter:2,nextChapterExists:3},[-1,-1])}}export{R as preload};
