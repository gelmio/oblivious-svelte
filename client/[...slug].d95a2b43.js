import{S as t,i as e,s as o,e as s,c as n,b as a,f as l,h as r,j as c,l as i,y as u,t as h,a as m,g as d,d as p,k as f,C as x,D as b,v,m as g,z as k,A as w,E as y,r as E,G as $,O as C,Q as I,n as z,I as T,q as j,R as A,K as B,T as D}from"./client.38b34e65.js";import{g as P}from"./reader-hints.7cc72d8f.js";const{document:V,window:N}=I;function G(t){let e,o,i,x,b,v,g,k,w,y,E;return{c(){e=s("div"),o=s("p"),i=h("Congrats! You've made it to the end of Book 2!"),x=m(),b=s("p"),v=h("That's as far as things go for the moment, but Book 3 is on\n\t\t\t\t\tthe way out soon!"),g=m(),k=s("p"),w=h("While you wait, feel free to jump on the mailing list, or "),y=s("a"),E=h("flick me some money to keep the wheels rolling!"),this.h()},l(t){e=n(t,"DIV",{class:!0});var s=a(e);o=n(s,"P",{});var r=a(o);i=d(r,"Congrats! You've made it to the end of Book 2!"),r.forEach(l),x=p(s),b=n(s,"P",{});var c=a(b);v=d(c,"That's as far as things go for the moment, but Book 3 is on\n\t\t\t\t\tthe way out soon!"),c.forEach(l),g=p(s),k=n(s,"P",{});var u=a(k);w=d(u,"While you wait, feel free to jump on the mailing list, or "),y=n(u,"A",{href:!0,rel:!0,class:!0});var h=a(y);E=d(h,"flick me some money to keep the wheels rolling!"),h.forEach(l),u.forEach(l),s.forEach(l),this.h()},h(){r(y,"href","https://transactions.sendowl.com/products/78458726/77A44CD1/add_to_cart"),r(y,"rel","nofollow"),r(y,"class","border-b border-oblivious-dark"),r(e,"class","text-center font-header mt-8")},m(t,s){c(t,e,s),f(e,o),f(o,i),f(e,x),f(e,b),f(b,v),f(e,g),f(e,k),f(k,w),f(k,y),f(y,E)},p:u,d(t){t&&l(e)}}}function L(t){let e,o,i,u,x,b,v=t[3]?"Chapter":"Book",k=t[9][1]>10&&!(t[9][1]%5)&&O();return{c(){e=s("div"),o=s("a"),i=h("Next "),u=h(v),b=m(),k&&k.c(),this.h()},l(t){e=n(t,"DIV",{class:!0});var s=a(e);o=n(s,"A",{rel:!0,href:!0,class:!0});var r=a(o);i=d(r,"Next "),u=d(r,v),r.forEach(l),b=p(s),k&&k.l(s),s.forEach(l),this.h()},h(){r(o,"rel","prefetch"),r(o,"href",x="read/"+t[9][0]+"/"+t[9][1]),r(o,"class","inline-block text-lg p-2 rounded-lg no-underline bg-oblivious mr-4"),r(e,"class","flex flex-col md:flex-row justify-end items-end mt-8")},m(t,s){c(t,e,s),f(e,o),f(o,i),f(o,u),f(e,b),k&&k.m(e,null)},p(t,s){8&s&&v!==(v=t[3]?"Chapter":"Book")&&g(u,v),512&s&&x!==(x="read/"+t[9][0]+"/"+t[9][1])&&r(o,"href",x),t[9][1]>10&&!(t[9][1]%5)?k||(k=O(),k.c(),k.m(e,null)):k&&(k.d(1),k=null)},d(t){t&&l(e),k&&k.d()}}}function O(t){let e,o,i,u;return{c(){e=s("span"),o=h("... or "),i=s("a"),u=h("flick me some money!"),this.h()},l(t){e=n(t,"SPAN",{class:!0});var s=a(e);o=d(s,"... or "),i=n(s,"A",{href:!0,rel:!0,class:!0});var r=a(i);u=d(r,"flick me some money!"),r.forEach(l),s.forEach(l),this.h()},h(){r(i,"href","https://transactions.sendowl.com/products/78458726/77A44CD1/add_to_cart"),r(i,"rel","nofollow"),r(i,"class","border-b border-oblivious-dark"),r(e,"class","m-2")},m(t,s){c(t,e,s),f(e,o),f(e,i),f(i,u)},d(t){t&&l(e)}}}function H(t){let e,o,h,m;return{c(){e=s("div"),this.h()},l(t){e=n(t,"DIV",{class:!0}),a(e).forEach(l),this.h()},h(){r(e,"class","fixed inset-0 flex justify-center items-center cursor-zoom-out bg-oblivious-opaque")},m(o,s){c(o,e,s),t[16](e),h||(m=i(e,"click",t[17]),h=!0)},p:u,i(t){o||z((()=>{o=T(e,j,{}),o.start()}))},o:u,d(o){o&&l(e),t[16](null),h=!1,m()}}}function q(t){let e,o,b,v,g,k,w,y,E,$,C,I,A,B,D,P,V,N,G,L,O,H,q,M,W;return{c(){e=s("div"),o=s("div"),b=s("p"),v=h("Here's some tips:"),g=m(),k=s("p"),w=h("Tap the text to turn the pages."),y=m(),E=s("p"),$=h("Tap the images to zoom."),C=m(),I=s("p"),A=h("I'll help you out by keeping track of where you're up to."),B=m(),D=s("p"),P=h("I'll also scroll automatically to where the pages are so you\n\t\t\t\tdon't have to bother your finger..."),V=m(),N=s("div"),G=s("span"),L=h("Got it"),this.h()},l(t){e=n(t,"DIV",{class:!0});var s=a(e);o=n(s,"DIV",{class:!0});var r=a(o);b=n(r,"P",{class:!0});var c=a(b);v=d(c,"Here's some tips:"),c.forEach(l),g=p(r),k=n(r,"P",{class:!0});var i=a(k);w=d(i,"Tap the text to turn the pages."),i.forEach(l),y=p(r),E=n(r,"P",{class:!0});var u=a(E);$=d(u,"Tap the images to zoom."),u.forEach(l),C=p(r),I=n(r,"P",{class:!0});var h=a(I);A=d(h,"I'll help you out by keeping track of where you're up to."),h.forEach(l),B=p(r),D=n(r,"P",{class:!0});var m=a(D);P=d(m,"I'll also scroll automatically to where the pages are so you\n\t\t\t\tdon't have to bother your finger..."),m.forEach(l),V=p(r),N=n(r,"DIV",{});var f=a(N);G=n(f,"SPAN",{class:!0});var x=a(G);L=d(x,"Got it"),x.forEach(l),f.forEach(l),r.forEach(l),s.forEach(l),this.h()},h(){r(b,"class","font-header text-xl md:text-2xl mb-4"),r(k,"class","font-sans text-base md:text-lg mb-1"),r(E,"class","font-sans text-base md:text-lg mb-1"),r(I,"class","font-sans text-base md:text-lg mb-1"),r(D,"class","font-sans text-base md:text-lg mb-1"),r(G,"class","inline-block text-base md:text-lg p-2 rounded-lg no-underline bg-oblivious cursor-pointer"),r(o,"class","rounded-lg bg-white p-2 md:p-16 flex flex-col text-center m-2"),r(e,"class","fixed inset-0 flex justify-center items-center bg-oblivious-opaque z-10")},m(s,n){c(s,e,n),f(e,o),f(o,b),f(b,v),f(o,g),f(o,k),f(k,w),f(o,y),f(o,E),f(E,$),f(o,C),f(o,I),f(I,A),f(o,B),f(o,D),f(D,P),f(o,V),f(o,N),f(N,G),f(G,L),q=!0,M||(W=i(G,"click",t[18]),M=!0)},p:u,i(t){q||(z((()=>{H&&H.end(1),O||(O=T(e,j,{delay:1e3})),O.start()})),q=!0)},o(t){O&&O.invalidate(),H=x(e,j,{}),q=!1},d(t){t&&l(e),t&&H&&H.end(),M=!1,W()}}}function M(t){let e,o,u,x,$,C,I,z,T,j,D,P,O,M,W,_,S,Y,K,Q,X,F;function J(t,e){return t[9][0]<3?L:G}V.title=e="Oblivious | Book "+t[1]+", Chapter "+t[2]+" | An overlanding motorbike journey\n\t\tthrough West Africa\n\t";let U=J(t),Z=U(t),tt=t[8]&&H(t),et=t[10]&&q(t);return{c(){o=m(),u=s("article"),x=s("h2"),$=h("Book "),C=h(t[1]),I=h(", Chapter "),z=h(t[2]),T=m(),j=s("div"),P=m(),Z.c(),M=m(),W=s("div"),_=h("Oblivious | Luke Gelmi"),S=m(),tt&&tt.c(),Y=m(),et&&et.c(),K=b(),this.h()},l(e){v('[data-svelte="svelte-ebvlk1"]',V.head).forEach(l),o=p(e),u=n(e,"ARTICLE",{class:!0});var s=a(u);x=n(s,"H2",{class:!0});var r=a(x);$=d(r,"Book "),C=d(r,t[1]),I=d(r,", Chapter "),z=d(r,t[2]),r.forEach(l),T=p(s),j=n(s,"DIV",{class:!0,style:!0});var c=a(j);P=p(c),Z.l(c),c.forEach(l),M=p(s),W=n(s,"DIV",{class:!0});var i=a(W);_=d(i,"Oblivious | Luke Gelmi"),i.forEach(l),s.forEach(l),S=p(e),tt&&tt.l(e),Y=p(e),et&&et.l(e),K=b(),this.h()},h(){r(x,"class","font-header"),D=new A(P),r(j,"class","h-screen overflow-hidden py-12"),r(j,"style",O=t[5]?.width?`\n\t\t\tcolumn-count: auto;\n\t\t\t-webkit-column-count: auto;\n\t\t\t-moz-column-count: auto;\n\t\t\tcolumn-width: ${t[6]}px;\n\t\t\t-webkit-column-width: ${t[6]}px;\n\t\t\t-moz-column-width: ${t[6]}px;\n\t\t\tcolumn-gap: ${R}px;\n\t\t\t-webkit-column-gap: ${R}em;\n\t\t\t-moz-column-gap: ${R}em;\n\t\t\tcolumn-rule: 1px solid #000;\n\t\t\t-webkit-column-rule: 1px solid #000;\n     \t\t-moz-column-rule: 1px solid #000;\n\t\t\t`:""),r(W,"class","text-xs text-center -mt-10"),r(u,"class","prose md:prose-xl text-justify mb-8 md:mb-12 pt-16")},m(e,s){c(e,o,s),c(e,u,s),f(u,x),f(x,$),f(x,C),f(x,I),f(x,z),f(u,T),f(u,j),D.m(t[0],j),f(j,P),Z.m(j,null),t[14](j),f(u,M),f(u,W),f(W,_),c(e,S,s),tt&&tt.m(e,s),c(e,Y,s),et&&et.m(e,s),c(e,K,s),Q=!0,X||(F=[i(N,"resize",t[13]),i(j,"click",t[15])],X=!0)},p(t,[o]){(!Q||6&o)&&e!==(e="Oblivious | Book "+t[1]+", Chapter "+t[2]+" | An overlanding motorbike journey\n\t\tthrough West Africa\n\t")&&(V.title=e),(!Q||2&o)&&g(C,t[1]),(!Q||4&o)&&g(z,t[2]),(!Q||1&o)&&D.p(t[0]),U===(U=J(t))&&Z?Z.p(t,o):(Z.d(1),Z=U(t),Z&&(Z.c(),Z.m(j,null))),(!Q||96&o&&O!==(O=t[5]?.width?`\n\t\t\tcolumn-count: auto;\n\t\t\t-webkit-column-count: auto;\n\t\t\t-moz-column-count: auto;\n\t\t\tcolumn-width: ${t[6]}px;\n\t\t\t-webkit-column-width: ${t[6]}px;\n\t\t\t-moz-column-width: ${t[6]}px;\n\t\t\tcolumn-gap: ${R}px;\n\t\t\t-webkit-column-gap: ${R}em;\n\t\t\t-moz-column-gap: ${R}em;\n\t\t\tcolumn-rule: 1px solid #000;\n\t\t\t-webkit-column-rule: 1px solid #000;\n     \t\t-moz-column-rule: 1px solid #000;\n\t\t\t`:""))&&r(j,"style",O),t[8]?tt?(tt.p(t,o),256&o&&k(tt,1)):(tt=H(t),tt.c(),k(tt,1),tt.m(Y.parentNode,Y)):tt&&(tt.d(1),tt=null),t[10]?et?(et.p(t,o),1024&o&&k(et,1)):(et=q(t),et.c(),k(et,1),et.m(K.parentNode,K)):et&&(B(),w(et,1,1,(()=>{et=null})),y())},i(t){Q||(k(tt),k(et),Q=!0)},o(t){w(et),Q=!1},d(e){e&&l(o),e&&l(u),Z.d(),t[14](null),e&&l(S),tt&&tt.d(e),e&&l(Y),et&&et.d(e),e&&l(K),X=!1,E(F)}}}var W=function(t,e,o,s){return new(o||(o=Promise))((function(n,a){function l(t){try{c(s.next(t))}catch(t){a(t)}}function r(t){try{c(s.throw(t))}catch(t){a(t)}}function c(t){var e;t.done?n(t.value):(e=t.value,e instanceof o?e:new o((function(t){t(e)}))).then(l,r)}c((s=s.apply(t,e||[])).next())}))};function _({params:t,query:e}){return W(this,void 0,void 0,(function*(){const[e,o]=t.slug.map((t=>+t)),s=yield this.fetch(`read/${e}/${o}.json`),{chapter:n,nextChapterExists:a,message:l}=yield s.json();if(200===s.status)return{content:n,book:e,chapter:o,nextChapterExists:a};this.error(s.status,l)}))}let R=50;function S(t,e,o){let s;$(t,P,(t=>o(10,s=t)));let n,a,l,r,c,{content:i}=e,{book:u}=e,{chapter:h}=e,{nextChapterExists:m}=e,d=!1;const p=()=>{o(5,a=n.getBoundingClientRect()),o(6,l=Math.round(a.width))},f=({clientX:t,target:e})=>{if("IMG"===e.tagName)o(8,d=!0),setTimeout((()=>{o(7,r.innerHTML=e.outerHTML,r),console.log(d)}),1);else if(t&&a&&a.left&&l&&!(n.scrollLeft%(l+R)>2)){const e=a.left+l/2,o=l+R;n.scrollBy({top:0,left:(t<=e?-1:1)*o,behavior:"smooth"})}};C((()=>{setTimeout((()=>{p();const t=(window.pageYOffset||document.documentElement.scrollTop)+a.top;window.scrollTo({top:t,behavior:"smooth"})}),2500)}));return t.$$set=t=>{"content"in t&&o(0,i=t.content),"book"in t&&o(1,u=t.book),"chapter"in t&&o(2,h=t.chapter),"nextChapterExists"in t&&o(3,m=t.nextChapterExists)},t.$$.update=()=>{14&t.$$.dirty&&o(9,c=!m&&u<3?[u+1,1]:[u,h+1])},[i,u,h,m,n,a,l,r,d,c,s,p,f,()=>p(),function(t){D[t?"unshift":"push"]((()=>{n=t,o(4,n)}))},t=>f(t),function(t){D[t?"unshift":"push"]((()=>{r=t,o(7,r)}))},()=>o(8,d=!1),()=>{P.set(!1)}]}export default class extends t{constructor(t){super(),e(this,t,S,M,o,{content:0,book:1,chapter:2,nextChapterExists:3})}}export{_ as preload};
